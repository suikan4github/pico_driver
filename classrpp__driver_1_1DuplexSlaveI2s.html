<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Raspberry Pio Pico Drivers project: rpp_driver::DuplexSlaveI2s Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Raspberry Pio Pico Drivers project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacerpp__driver.html">rpp_driver</a></li><li class="navelem"><a class="el" href="classrpp__driver_1_1DuplexSlaveI2s.html">DuplexSlaveI2s</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle"><div class="title">rpp_driver::DuplexSlaveI2s Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Duplex Slave I2S controller class.  
 <a href="classrpp__driver_1_1DuplexSlaveI2s.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="duplexslavei2s_8hpp_source.html">duplexslavei2s.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afdb32a4927ce9432d61ab5a2314d65b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrpp__driver_1_1DuplexSlaveI2s.html#afdb32a4927ce9432d61ab5a2314d65b2">DuplexSlaveI2s</a> (<a class="el" href="classrpp__driver_1_1SdkWrapper.html">::rpp_driver::SdkWrapper</a> &amp;sdk, PIO pio, uint pin_base)</td></tr>
<tr class="memdesc:afdb32a4927ce9432d61ab5a2314d65b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new Duplex Slave I 2 S object.  <br /></td></tr>
<tr class="separator:afdb32a4927ce9432d61ab5a2314d65b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac94c97d96b8295a3635b0a93b62f190f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrpp__driver_1_1DuplexSlaveI2s.html#ac94c97d96b8295a3635b0a93b62f190f">DuplexSlaveI2s</a> (<a class="el" href="classrpp__driver_1_1SdkWrapper.html">::rpp_driver::SdkWrapper</a> &amp;sdk, PIO pio, uint32_t sm, uint pin_base)</td></tr>
<tr class="memdesc:ac94c97d96b8295a3635b0a93b62f190f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new Duplex Slave I 2 S object.  <br /></td></tr>
<tr class="separator:ac94c97d96b8295a3635b0a93b62f190f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a525780f9ee0b298ed4ccbcdad0ffbd19"><td class="memItemLeft" align="right" valign="top"><a id="a525780f9ee0b298ed4ccbcdad0ffbd19" name="a525780f9ee0b298ed4ccbcdad0ffbd19"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>~DuplexSlaveI2s</b> ()</td></tr>
<tr class="memdesc:a525780f9ee0b298ed4ccbcdad0ffbd19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the state machine and make FIFO empty. <br /></td></tr>
<tr class="separator:a525780f9ee0b298ed4ccbcdad0ffbd19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a219a9eb6706560ce0c7f7768c83fefe5"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrpp__driver_1_1DuplexSlaveI2s.html#a219a9eb6706560ce0c7f7768c83fefe5">Start</a> ()</td></tr>
<tr class="memdesc:a219a9eb6706560ce0c7f7768c83fefe5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the I2S port, and run.  <br /></td></tr>
<tr class="separator:a219a9eb6706560ce0c7f7768c83fefe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9060790824cd578fa23d0babd8eeda0e"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrpp__driver_1_1DuplexSlaveI2s.html#a9060790824cd578fa23d0babd8eeda0e">Stop</a> ()</td></tr>
<tr class="memdesc:a9060790824cd578fa23d0babd8eeda0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the I2S port and disable the PIO state machine in use.  <br /></td></tr>
<tr class="separator:a9060790824cd578fa23d0babd8eeda0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba17087b541419ffb47f8d98900ab9a3"><td class="memItemLeft" align="right" valign="top">virtual uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrpp__driver_1_1DuplexSlaveI2s.html#aba17087b541419ffb47f8d98900ab9a3">GetStateMachine</a> ()</td></tr>
<tr class="memdesc:aba17087b541419ffb47f8d98900ab9a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the State Machine object.  <br /></td></tr>
<tr class="separator:aba17087b541419ffb47f8d98900ab9a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3d58baaac410914ac20e04a87304f53"><td class="memItemLeft" align="right" valign="top">virtual int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrpp__driver_1_1DuplexSlaveI2s.html#af3d58baaac410914ac20e04a87304f53">GetFifoBlocking</a> ()</td></tr>
<tr class="memdesc:af3d58baaac410914ac20e04a87304f53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get one audio data from RX FIFO.  <br /></td></tr>
<tr class="separator:af3d58baaac410914ac20e04a87304f53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cbc1d57e4a17f67bf6a9a70551d5c11"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrpp__driver_1_1DuplexSlaveI2s.html#a7cbc1d57e4a17f67bf6a9a70551d5c11">PutFifoBlocking</a> (int32_t value)</td></tr>
<tr class="memdesc:a7cbc1d57e4a17f67bf6a9a70551d5c11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put one audio data to TX FIFO.  <br /></td></tr>
<tr class="separator:a7cbc1d57e4a17f67bf6a9a70551d5c11"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Duplex Slave I2S controller class. </p>
<p>This class support the duplex communication of the I2S on the PIO port of the RP2040/2350 SoC MCU.</p>
<p>The timing signal (BCLK and WS) of the I2S must be provided from the external device. This class support up to 192kHz Fs if the MCU system clock is higher than 120MHz.</p>
<p>The I2S pins can be mapped on the GPIO. This mapping is based on the pin_base parameter of the constructors.</p>
<p>The pin_base parameter of the constructors is the first pin of 4 I2S signals. The signals must be consecutive on the GPIO pins as like :</p><ol type="1">
<li>SDOUT</li>
<li>SDIN</li>
<li>BCLK</li>
<li>WS</li>
</ol>
<p>To start and stop the I2S transfer, call the <a class="el" href="classrpp__driver_1_1DuplexSlaveI2s.html#a219a9eb6706560ce0c7f7768c83fefe5" title="Initialize the I2S port, and run.">Start()</a> and the <a class="el" href="classrpp__driver_1_1DuplexSlaveI2s.html#a9060790824cd578fa23d0babd8eeda0e" title="Stop the I2S port and disable the PIO state machine in use.">Stop()</a> member functions respectively.</p>
<p>The audio sample in and out are through the <a class="el" href="classrpp__driver_1_1DuplexSlaveI2s.html#af3d58baaac410914ac20e04a87304f53" title="Get one audio data from RX FIFO.">GetFifoBlocking()</a> and the <a class="el" href="classrpp__driver_1_1DuplexSlaveI2s.html#a7cbc1d57e4a17f67bf6a9a70551d5c11" title="Put one audio data to TX FIFO.">PutFifoBlocking()</a> member function, respectively. These are blocking function. That mean, program will wait until the data is ready, or FIFO has room for data.</p>
<p>This class assumes polling based data transfer instead of interrupt / DMA based data transfer. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afdb32a4927ce9432d61ab5a2314d65b2" name="afdb32a4927ce9432d61ab5a2314d65b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdb32a4927ce9432d61ab5a2314d65b2">&#9670;&#160;</a></span>DuplexSlaveI2s() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rpp_driver::DuplexSlaveI2s::DuplexSlaveI2s </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrpp__driver_1_1SdkWrapper.html">::rpp_driver::SdkWrapper</a> &amp;&#160;</td>
          <td class="paramname"><em>sdk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PIO&#160;</td>
          <td class="paramname"><em>pio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>pin_base</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new Duplex Slave I 2 S object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sdk</td><td>SDK wrapper class injection. </td></tr>
    <tr><td class="paramname">pio</td><td>PIO to use. </td></tr>
    <tr><td class="paramname">pin_base</td><td>The GPIO pin number of SDOUT signal.</td></tr>
  </table>
  </dd>
</dl>
<p>The state machine number is not specified in this constructor. Internally, the state machine will be allocate from the unused one. </p>

</div>
</div>
<a id="ac94c97d96b8295a3635b0a93b62f190f" name="ac94c97d96b8295a3635b0a93b62f190f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac94c97d96b8295a3635b0a93b62f190f">&#9670;&#160;</a></span>DuplexSlaveI2s() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rpp_driver::DuplexSlaveI2s::DuplexSlaveI2s </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrpp__driver_1_1SdkWrapper.html">::rpp_driver::SdkWrapper</a> &amp;&#160;</td>
          <td class="paramname"><em>sdk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PIO&#160;</td>
          <td class="paramname"><em>pio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>sm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>pin_base</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new Duplex Slave I 2 S object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sdk</td><td>SDK wrapper class injection. </td></tr>
    <tr><td class="paramname">pio</td><td>PIO to use. </td></tr>
    <tr><td class="paramname">sm</td><td>State machine to use. </td></tr>
    <tr><td class="paramname">pin_base</td><td>The GPIO pin number of SDOUT signal. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af3d58baaac410914ac20e04a87304f53" name="af3d58baaac410914ac20e04a87304f53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3d58baaac410914ac20e04a87304f53">&#9670;&#160;</a></span>GetFifoBlocking()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t rpp_driver::DuplexSlaveI2s::GetFifoBlocking </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get one audio data from RX FIFO. </p>
<dl class="section return"><dt>Returns</dt><dd>int32_t An audio data.</dd></dl>
<p>To get one stere sample, call this member function twice. The left data will be given and then, right data.</p>
<p>This function is blocking. That mean, program will wait until the data has been received. </p>

</div>
</div>
<a id="aba17087b541419ffb47f8d98900ab9a3" name="aba17087b541419ffb47f8d98900ab9a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba17087b541419ffb47f8d98900ab9a3">&#9670;&#160;</a></span>GetStateMachine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t rpp_driver::DuplexSlaveI2s::GetStateMachine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the State Machine object. </p>
<dl class="section return"><dt>Returns</dt><dd>uint32_t The number of the state machine which is claimed.</dd></dl>
<p>This is convenient if the state machine is assigned internally. </p>

</div>
</div>
<a id="a7cbc1d57e4a17f67bf6a9a70551d5c11" name="a7cbc1d57e4a17f67bf6a9a70551d5c11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cbc1d57e4a17f67bf6a9a70551d5c11">&#9670;&#160;</a></span>PutFifoBlocking()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rpp_driver::DuplexSlaveI2s::PutFifoBlocking </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Put one audio data to TX FIFO. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>An audio data to send. To put one stere sample, call this member function twice. The left data must be put and then, right data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a219a9eb6706560ce0c7f7768c83fefe5" name="a219a9eb6706560ce0c7f7768c83fefe5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a219a9eb6706560ce0c7f7768c83fefe5">&#9670;&#160;</a></span>Start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rpp_driver::DuplexSlaveI2s::Start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the I2S port, and run. </p>
<p>Assign the GPIO, configure them, load the PIO program, configure the state machine and run. </p>

</div>
</div>
<a id="a9060790824cd578fa23d0babd8eeda0e" name="a9060790824cd578fa23d0babd8eeda0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9060790824cd578fa23d0babd8eeda0e">&#9670;&#160;</a></span>Stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rpp_driver::DuplexSlaveI2s::Stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stop the I2S port and disable the PIO state machine in use. </p>
<p>Make FIFOs empty. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/i2s/<a class="el" href="duplexslavei2s_8hpp_source.html">duplexslavei2s.hpp</a></li>
<li>src/i2s/duplexslavei2s.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
